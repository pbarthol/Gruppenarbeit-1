<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Notizen Verwaltung</title>
    <!--<link rel="stylesheet" href="D:\CAS-FEE\Gruppenarbeit_1\notizen_verwaltung_styles.css" type="text/css">-->
    <link rel="stylesheet" href="notes_administration_styles.css" type="text/css">
    <script src="http://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>

</head>

<header>
    <!-- Add note and select type section -->
    <div class="add_note_content">
        <button class="create_new_note">Create new Note</button>
        <label class="unvisible_boxelement_60_percent"></label>
        <select class="select_style">
            <option selected>Option1</option>
            <option>Option2</option>
        </select>
    </div>

    <!-- Filter section -->
    <div class="filter_content">
        <button class="filter_finish_date">By finish Date</button>
        <button class="filter_created_date">By created Date</button>
        <button class="filter_priority">By Importance</button>
        <label class="unvisible_boxelement_20_percent"></label>
        <button class="filter_finished">Show finished</button>
    </div>
</header>

<body>
<script id="notes-template" type="text/x-handlebars-template">
    {{#each this}}
    <p  class="one_note">
        <span class="one_note_finished">
            <time datetime=\"1918-11-09\">{{this.date}}</time>
            <br>
            {{#if this.finished }}
                <input type=checkbox disabled checked>
            {{else}}
                <input type=checkbox disabled>
            {{/if}}
        </span>
        <textarea class="one_note_description">{{this.description}}</textarea>
        <button class="one_note_edit" edit-noteId="{{this.id}}">Edit</button>
    </p>
    {{/each}}
</script>

<h1>Notes</h1>
<ul id="notes"></ul>

<!-- Test Notes Einträge-->
<!-- Später als Objekte auf dem Server-->
<script>
    var notes = [
        {"id":"01", "finished":false,
            "date":"2016-06-01",
            "description":"Note1",
            "rating":3},
        {"id":"02", "finished":true,
            "date":"2016-06-02",
            "description":"Note2",
            "rating":3},
        {"id":"03", "finished":false,
            "date":"2016-06-03",
            "description":"Note3",
            "rating":3},
        {"id":"04", "finished":false,
            "date":"2016-06-04",
            "description":"Note4",
            "rating":3}
    ];

    function createNotesHtml (notes) {
        var htmlString = "";
        notes.forEach(function (note) {
            htmlString += "<p  class=\"one_note\">";

            htmlString += "<span  class=\"one_note_finished\">";
            //htmlString += "<fieldset>"
            htmlString += "<time datetime=\"1918-11-09\">";
            htmlString += note.date;
            htmlString += "</time>";
            htmlString += "<br>";
            htmlString += "<input type=checkbox disabled";
            if (note.finished)
                htmlString += " checked";
            /*htmlString += "<button onclick='changeFinished(";//
            htmlString += note.id;
            htmlString += ")'></button>";
            */
            htmlString += ">";
            //htmlString += "</fieldset>";
            htmlString += "</span>";

            htmlString += "<textarea class=one_note_description>";
            htmlString += note.description;
            htmlString += "</textarea>";

            htmlString += "<button class='one_note_edit'>Edit</button>";
            htmlString += "</p>";
        });
        return htmlString;
    }
    /*
    function renderNotes () {
        document.getElementById("notes").innerHTML=createNotesHtml(notes);
    }
    */
    //window.onload = renderNotes;

    function bubbledClickEventHandler(event) {
        //takes advantage of event bubbling
        var buttonText = event.target.textContent;
        var buttonNoteId = event.target.getAttribute("edit-noteId");
        console.log("click target: Note Edit Button"+buttonNoteId);
        return;
    }


    var createNotesHtml = Handlebars.compile(document.getElementById("notes-template").innerText);
    function renderNotes () {
        $("#notes").html(createNotesHtml(notes));
    }
    $(function() {
        renderNotes();
        $("#notes").on("click", bubbledClickEventHandler);
    });

</script>

<!--<script rel="stylesheet" href="notes_administration.js" type="text/javascript"></script>-->

</body>


<footer>

</footer>
</html>